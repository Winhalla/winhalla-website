import{S as s,i as e,s as a,e as l,a as t,t as r,c as n,g as c,f as o,h as i,d as f,j as h,w as d,l as g,k as m,n as p,D as u,C as v,q as x,L as E,N as y,K as w,o as I,O as D,r as b,p as $,m as V,u as k,v as P,H as G,I as B,J as T,M,y as R}from"./client.147704b3.js";import{R as j}from"./RefreshButton.fa1c843e.js";import{L}from"./Loading.51a075f2.js";import{b as C}from"./index.e174eccd.js";function F(s,e,a){const l=s.slice();return l[0]=e[a],l[4]=a,l}function A(s,e,a){const l=s.slice();return l[5]=e[a],l}function H(s,e,a){const l=s.slice();return l[5]=e[a],l[4]=a,l}function N(s,e,a){const l=s.slice();return l[5]=e[a],l[4]=a,l}function U(s,e,a){const l=s.slice();return l[5]=e[a],l[4]=a,l}function q(s){let e,a,u,v,x,E,y,w,I,D,b,$,V,k,P,G,B,T=s[5].username+"",M=s[5].wins+"";return{c(){e=l("div"),a=l("div"),u=l("div"),v=l("img"),y=t(),w=l("p"),I=r(T),D=t(),b=l("div"),$=l("p"),V=r("Games won: "),k=l("b"),P=r(M),G=r("/8"),B=t(),this.h()},l(s){e=n(s,"DIV",{});var l=c(e);a=n(l,"DIV",{});var t=c(a);u=n(t,"DIV",{class:!0});var r=c(u);v=n(r,"IMG",{src:!0,alt:!0,class:!0}),y=o(r),w=n(r,"P",{class:!0});var h=c(w);I=i(h,T),h.forEach(f),D=o(r),b=n(r,"DIV",{class:!0});var d=c(b);$=n(d,"P",{});var g=c($);V=i(g,"Games won: "),k=n(g,"B",{class:!0});var m=c(k);P=i(m,M),m.forEach(f),G=i(g,"/8"),g.forEach(f),d.forEach(f),r.forEach(f),t.forEach(f),B=o(l),l.forEach(f),this.h()},h(){v.src!==(x="/assets/CharactersBanners/"+s[5].legends+".png")&&h(v,"src",x),h(v,"alt",E=s[5].legends),h(v,"class","block"),h(w,"class","player-name text-4xl svelte-1dsvpkg"),h(k,"class","svelte-1dsvpkg"),h(b,"class","stats text-2xl bottom-5 text-ultra-light svelte-1dsvpkg"),h(u,"class","ffa-player card user svelte-1dsvpkg"),d(e,"lg:ml-10",s[4]>0)},m(s,l){g(s,e,l),m(e,a),m(a,u),m(u,v),m(u,y),m(u,w),m(w,I),m(u,D),m(u,b),m(b,$),m($,V),m($,k),m(k,P),m($,G),m(e,B)},p:p,d(s){s&&f(e)}}}function O(s){let e,a,d,u,v,x,E,y,w,I,D,b,$,V,k,P,G,B=s[5].username+"",T=s[5].wins+"";return{c(){e=l("div"),a=l("div"),d=l("div"),u=l("img"),E=t(),y=l("p"),w=r(B),I=t(),D=l("div"),b=l("p"),$=r("Games won: "),V=l("b"),k=r(T),P=r("/8"),G=t(),this.h()},l(s){e=n(s,"DIV",{class:!0});var l=c(e);a=n(l,"DIV",{});var t=c(a);d=n(t,"DIV",{class:!0});var r=c(d);u=n(r,"IMG",{src:!0,alt:!0,class:!0}),E=o(r),y=n(r,"P",{class:!0});var h=c(y);w=i(h,B),h.forEach(f),I=o(r),D=n(r,"DIV",{class:!0});var g=c(D);b=n(g,"P",{});var m=c(b);$=i(m,"Games won: "),V=n(m,"B",{class:!0});var p=c(V);k=i(p,T),p.forEach(f),P=i(m,"/8"),m.forEach(f),g.forEach(f),r.forEach(f),t.forEach(f),G=o(l),l.forEach(f),this.h()},h(){u.src!==(v="/assets/CharactersBanners/"+s[5].legends+".png")&&h(u,"src",v),h(u,"alt",x=s[5].legends),h(u,"class","block"),h(y,"class","player-name text-4xl svelte-1dsvpkg"),h(V,"class","svelte-1dsvpkg"),h(D,"class","stats text-2xl bottom-5 text-ultra-light svelte-1dsvpkg"),h(d,"class","ffa-player card user svelte-1dsvpkg"),h(e,"class","mt-10 lg:ml-10")},m(s,l){g(s,e,l),m(e,a),m(a,d),m(d,u),m(d,E),m(d,y),m(y,w),m(d,I),m(d,D),m(D,b),m(b,$),m(b,V),m(V,k),m(b,P),m(e,G)},p:p,d(s){s&&f(e)}}}function W(s){let e,a,d,u,v,x,E,y,w,I,D,b,$,V,k,P,G,B=s[5].username+"",T=s[5].wins+"";return{c(){e=l("div"),a=l("div"),d=l("div"),u=l("img"),E=t(),y=l("p"),w=r(B),I=t(),D=l("div"),b=l("p"),$=r("Games won: "),V=l("b"),k=r(T),P=r("/8"),G=t(),this.h()},l(s){e=n(s,"DIV",{class:!0});var l=c(e);a=n(l,"DIV",{});var t=c(a);d=n(t,"DIV",{class:!0});var r=c(d);u=n(r,"IMG",{src:!0,alt:!0,class:!0}),E=o(r),y=n(r,"P",{class:!0});var h=c(y);w=i(h,B),h.forEach(f),I=o(r),D=n(r,"DIV",{class:!0});var g=c(D);b=n(g,"P",{});var m=c(b);$=i(m,"Games won: "),V=n(m,"B",{class:!0});var p=c(V);k=i(p,T),p.forEach(f),P=i(m,"/8"),m.forEach(f),g.forEach(f),r.forEach(f),t.forEach(f),G=o(l),l.forEach(f),this.h()},h(){u.src!==(v="/assets/CharactersBanners/"+s[5].legends+".png")&&h(u,"src",v),h(u,"alt",x=s[5].legends),h(u,"class","block"),h(y,"class","player-name text-4xl svelte-1dsvpkg"),h(V,"class","svelte-1dsvpkg"),h(D,"class","stats text-2xl bottom-5 text-ultra-light svelte-1dsvpkg"),h(d,"class","ffa-player card user svelte-1dsvpkg"),h(e,"class","mt-10 lg:mt-20 lg:ml-10")},m(s,l){g(s,e,l),m(e,a),m(a,d),m(d,u),m(d,E),m(d,y),m(y,w),m(d,I),m(d,D),m(D,b),m(b,$),m(b,V),m(V,k),m(b,P),m(e,G)},p:p,d(s){s&&f(e)}}}function Y(s){let e,a=(s[5].avatarURL||s[5].username)&&function(s){let e,a,d,u,v,x,E,y,w,I,D,b,$,V,k,P,G,B,T,M,R,j,L,C,F=s[4]+1+"",A=s[5].username+"",H=s[5].wins+"",N=s[5].coinsEarned+"",U=s[5].multiplier+"";return{c(){e=l("tr"),a=l("td"),d=l("b"),u=r(F),v=t(),x=l("td"),E=l("img"),I=t(),D=l("p"),b=r(A),$=t(),V=l("td"),k=l("b"),P=r(H),G=r("/8"),B=t(),T=l("td"),M=r(N),R=t(),j=l("td"),L=r(U),C=t(),this.h()},l(s){e=n(s,"TR",{});var l=c(e);a=n(l,"TD",{class:!0});var t=c(a);d=n(t,"B",{class:!0});var r=c(d);u=i(r,F),r.forEach(f),t.forEach(f),v=o(l),x=n(l,"TD",{class:!0});var h=c(x);E=n(h,"IMG",{class:!0,src:!0,alt:!0}),I=o(h),D=n(h,"P",{class:!0});var g=c(D);b=i(g,A),g.forEach(f),h.forEach(f),$=o(l),V=n(l,"TD",{class:!0});var m=c(V);k=n(m,"B",{class:!0});var p=c(k);P=i(p,H),p.forEach(f),G=i(m,"/8"),m.forEach(f),B=o(l),T=n(l,"TD",{class:!0});var y=c(T);M=i(y,N),y.forEach(f),R=o(l),j=n(l,"TD",{class:!0});var w=c(j);L=i(w,U),w.forEach(f),C=o(l),l.forEach(f),this.h()},h(){h(d,"class","font-normal svelte-1dsvpkg"),h(a,"class","px-6 py-2"),h(E,"class","block w-10 h-10 rounded-full"),E.src!==(y=s[5].avatarURL)&&h(E,"src",y),h(E,"alt",w=s[5].legends),h(D,"class","pl-2"),h(x,"class","flex items-center px-6 py-2"),h(k,"class","text-primary font-normal svelte-1dsvpkg"),h(V,"class","px-6 py-2"),h(T,"class","px-6 py-2"),h(j,"class","px-6 py-2")},m(s,l){g(s,e,l),m(e,a),m(a,d),m(d,u),m(e,v),m(e,x),m(x,E),m(x,I),m(x,D),m(D,b),m(e,$),m(e,V),m(V,k),m(k,P),m(V,G),m(e,B),m(e,T),m(T,M),m(e,R),m(e,j),m(j,L),m(e,C)},p:p,d(s){s&&f(e)}}}(s);return{c(){a&&a.c(),e=u()},l(s){a&&a.l(s),e=u()},m(s,l){a&&a.m(s,l),g(s,e,l)},p(s,e){(s[5].avatarURL||s[5].username)&&a.p(s,e)},d(s){a&&a.d(s),s&&f(e)}}}function Q(s){let e,a=s[0],l=[];for(let e=0;e<a.length;e+=1)l[e]=Y(A(s,a,e));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=u()},l(s){for(let e=0;e<l.length;e+=1)l[e].l(s);e=u()},m(s,a){for(let e=0;e<l.length;e+=1)l[e].m(s,a);g(s,e,a)},p(s,t){if(2&t){let r;for(a=s[0],r=0;r<a.length;r+=1){const n=A(s,a,r);l[r]?l[r].p(n,t):(l[r]=Y(n),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}},d(s){v(l,s),s&&f(e)}}}function z(s){let e,a,d,x,E,y,w,I,D,b,$,V,k,P,G,B,T,M,R,j,L,C,A,Y,z,J,K,S,X,Z,_,ss,es,as=s[1][0],ls=[];for(let e=0;e<as.length;e+=1)ls[e]=q(U(s,as,e));let ts=""!==s[1][1]&&function(s){let e,a=s[1][1],l=[];for(let e=0;e<a.length;e+=1)l[e]=O(N(s,a,e));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=u()},l(s){for(let e=0;e<l.length;e+=1)l[e].l(s);e=u()},m(s,a){for(let e=0;e<l.length;e+=1)l[e].m(s,a);g(s,e,a)},p(s,t){if(2&t){let r;for(a=s[1][1],r=0;r<a.length;r+=1){const n=N(s,a,r);l[r]?l[r].p(n,t):(l[r]=O(n),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}},d(s){v(l,s),s&&f(e)}}}(s),rs=""!==s[1][2]&&function(s){let e,a=s[1][2],l=[];for(let e=0;e<a.length;e+=1)l[e]=W(H(s,a,e));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=u()},l(s){for(let e=0;e<l.length;e+=1)l[e].l(s);e=u()},m(s,a){for(let e=0;e<l.length;e+=1)l[e].m(s,a);g(s,e,a)},p(s,t){if(2&t){let r;for(a=s[1][2],r=0;r<a.length;r+=1){const n=H(s,a,r);l[r]?l[r].p(n,t):(l[r]=W(n),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}},d(s){v(l,s),s&&f(e)}}}(s),ns=s[1],cs=[];for(let e=0;e<ns.length;e+=1)cs[e]=Q(F(s,ns,e));return{c(){e=l("div"),a=l("div"),d=l("div"),x=l("h1"),E=r("Match Ended"),y=t(),w=l("div"),I=l("div");for(let s=0;s<ls.length;s+=1)ls[s].c();D=t(),ts&&ts.c(),b=t(),rs&&rs.c(),$=t(),V=l("div"),k=l("div"),P=l("div"),G=l("table"),B=l("thead"),T=l("tr"),M=l("td"),R=r("Rank"),j=t(),L=l("td"),C=r("Player"),A=t(),Y=l("td"),z=r("Wins"),J=t(),K=l("td"),S=r("Earned"),X=t(),Z=l("td"),_=r("Multiplier"),ss=t(),es=l("tbody");for(let s=0;s<cs.length;s+=1)cs[s].c();this.h()},l(s){e=n(s,"DIV",{class:!0});var l=c(e);a=n(l,"DIV",{class:!0});var t=c(a);d=n(t,"DIV",{class:!0});var r=c(d);x=n(r,"H1",{class:!0});var h=c(x);E=i(h,"Match Ended"),h.forEach(f),r.forEach(f),t.forEach(f),y=o(l),w=n(l,"DIV",{class:!0});var g=c(w);I=n(g,"DIV",{class:!0});var m=c(I);for(let s=0;s<ls.length;s+=1)ls[s].l(m);D=o(m),ts&&ts.l(m),b=o(m),rs&&rs.l(m),m.forEach(f),$=o(g),V=n(g,"DIV",{});var p=c(V);k=n(p,"DIV",{class:!0});var u=c(k);P=n(u,"DIV",{});var v=c(P);G=n(v,"TABLE",{class:!0});var F=c(G);B=n(F,"THEAD",{class:!0});var H=c(B);T=n(H,"TR",{});var N=c(T);M=n(N,"TD",{class:!0});var U=c(M);R=i(U,"Rank"),U.forEach(f),j=o(N),L=n(N,"TD",{class:!0});var q=c(L);C=i(q,"Player"),q.forEach(f),A=o(N),Y=n(N,"TD",{class:!0});var O=c(Y);z=i(O,"Wins"),O.forEach(f),J=o(N),K=n(N,"TD",{class:!0});var W=c(K);S=i(W,"Earned"),W.forEach(f),X=o(N),Z=n(N,"TD",{class:!0});var Q=c(Z);_=i(Q,"Multiplier"),Q.forEach(f),N.forEach(f),H.forEach(f),ss=o(F),es=n(F,"TBODY",{class:!0});var as=c(es);for(let s=0;s<cs.length;s+=1)cs[s].l(as);as.forEach(f),F.forEach(f),v.forEach(f),u.forEach(f),p.forEach(f),g.forEach(f),l.forEach(f),this.h()},h(){h(x,"class","text-6xl"),h(d,"class","mode-timer lg:flex items-end"),h(a,"class","pl-7 lg:pl-24 pt-8 lg:pt-12"),h(I,"class","flex flex-col items-center lg:flex-row"),h(M,"class","px-6 py-3"),h(L,"class","px-6 py-3"),h(Y,"class","px-6 py-3"),h(K,"class","px-6 py-3"),h(Z,"class","px-6 py-3"),h(B,"class","bg-primary "),h(es,"class","divide-y-4 divide-background text-l"),h(G,"class","card px-4 overflow-hidden mt-10 lg:mt-20"),h(k,"class","overflow-x-scroll lg:overflow-auto pl-6 lg:pl-0 pb-4 lg:pb-8 "),h(w,"class","flex flex-col lg:items-center mt-8 lg:mt-0 relative lg:ml-24"),h(e,"class","")},m(s,l){g(s,e,l),m(e,a),m(a,d),m(d,x),m(x,E),m(e,y),m(e,w),m(w,I);for(let s=0;s<ls.length;s+=1)ls[s].m(I,null);m(I,D),ts&&ts.m(I,null),m(I,b),rs&&rs.m(I,null),m(w,$),m(w,V),m(V,k),m(k,P),m(P,G),m(G,B),m(B,T),m(T,M),m(M,R),m(T,j),m(T,L),m(L,C),m(T,A),m(T,Y),m(Y,z),m(T,J),m(T,K),m(K,S),m(T,X),m(T,Z),m(Z,_),m(G,ss),m(G,es);for(let s=0;s<cs.length;s+=1)cs[s].m(es,null)},p(s,[e]){if(2&e){let a;for(as=s[1][0],a=0;a<as.length;a+=1){const l=U(s,as,a);ls[a]?ls[a].p(l,e):(ls[a]=q(l),ls[a].c(),ls[a].m(I,D))}for(;a<ls.length;a+=1)ls[a].d(1);ls.length=as.length}if(""!==s[1][1]&&ts.p(s,e),""!==s[1][2]&&rs.p(s,e),2&e){let a;for(ns=s[1],a=0;a<ns.length;a+=1){const l=F(s,ns,a);cs[a]?cs[a].p(l,e):(cs[a]=Q(l),cs[a].c(),cs[a].m(es,null))}for(;a<cs.length;a+=1)cs[a].d(1);cs.length=ns.length}},i:p,o:p,d(s){s&&f(e),v(ls,s),ts&&ts.d(),rs&&rs.d(),v(cs,s)}}}function J(s,e,a){let{players:l}=e,{winners:t}=e;const r=t.map((s=>{let e=[];return s.forEach(((s,a)=>{if(""==s)return;const t=l.find((e=>e.steamId==s.steamId));e.push({username:t.username,avatarURL:t.avatarURL,legends:t.legends,wins:t.wins,coinsEarned:s.coins,multiplier:s.multiplier})})),e}));return s.$$set=s=>{"players"in s&&a(2,l=s.players),"winners"in s&&a(0,t=s.winners)},[t,r,l]}class K extends s{constructor(s){super(),e(this,s,J,z,a,{players:2,winners:0})}}function S(s,e,a){const l=s.slice();return l[15]=e[a],l}function X(s){let e,a,t,r;const o=[ss,_],i=[];function d(s,e){return s[0]?0:1}return a=d(s),t=i[a]=o[a](s),{c(){e=l("div"),t.c(),this.h()},l(s){e=n(s,"DIV",{class:!0});var a=c(e);t.l(a),a.forEach(f),this.h()},h(){h(e,"class","h-full")},m(s,l){g(s,e,l),i[a].m(e,null),r=!0},p(s,l){let r=a;a=d(s),a===r?i[a].p(s,l):(D(),E(i[r],1,1,(()=>{i[r]=null})),y(),t=i[a],t?t.p(s,l):(t=i[a]=o[a](s),t.c()),w(t,1),t.m(e,null))},i(s){r||(w(t),r=!0)},o(s){E(t),r=!1},d(s){s&&f(e),i[a].d()}}}function Z(s){let e,a,d,u,v,x,E;return{c(){e=l("div"),a=l("h2"),d=r(s[5]),u=t(),v=l("a"),x=l("p"),E=r("Go to play page"),this.h()},l(l){e=n(l,"DIV",{class:!0});var t=c(e);a=n(t,"H2",{class:!0});var r=c(a);d=i(r,s[5]),r.forEach(f),u=o(t),v=n(t,"A",{href:!0});var h=c(v);x=n(h,"P",{class:!0});var g=c(x);E=i(g,"Go to play page"),g.forEach(f),h.forEach(f),t.forEach(f),this.h()},h(){h(a,"class","lg:text-4xl text-3xl text-center"),h(x,"class","underline lg:text-3xl text-2xl  text-center text-primary"),h(v,"href","/play"),h(e,"class","w-full content-center lg:mt-60 mt-25 ")},m(s,l){g(s,e,l),m(e,a),m(a,d),m(e,u),m(e,v),m(v,x),m(x,E)},p(s,e){32&e&&P(d,s[5])},i:p,o:p,d(s){s&&f(e)}}}function _(s){let e,a;return e=new L({props:{data:"Loading game data..."}}),{c(){G(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,l){T(e,s,l),a=!0},p:p,i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){E(e.$$.fragment,s),a=!1},d(s){M(e,s)}}}function ss(s){let e,a,l,t;const r=[as,es],n=[];function c(s,e){return s[1]?0:1}return e=c(s),a=n[e]=r[e](s),{c(){a.c(),l=u()},l(s){a.l(s),l=u()},m(s,a){n[e].m(s,a),g(s,l,a),t=!0},p(s,t){let o=e;e=c(s),e===o?n[e].p(s,t):(D(),E(n[o],1,1,(()=>{n[o]=null})),y(),a=n[e],a?a.p(s,t):(a=n[e]=r[e](s),a.c()),w(a,1),a.m(l.parentNode,l))},i(s){t||(w(a),t=!0)},o(s){E(a),t=!1},d(s){n[e].d(s),s&&f(l)}}}function es(s){let e,a,d,p,u,v,x,y,I,D,b,$,V,k,P;function R(s,e){return s[2]?ts:ls}let L=R(s),C=L(s);D=new j({props:{isRefreshing:s[6],refreshMessage:"Refresh data"}}),D.$on("click",s[10]);let F=0==s[3].gamesPlayed&&rs(s),A=s[3]&&ns(s),H=s[4]&&cs(s);return{c(){e=l("div"),a=l("div"),d=l("div"),p=l("h1"),u=r("FFA"),v=t(),x=l("p"),C.c(),y=t(),I=l("div"),G(D.$$.fragment),b=t(),F&&F.c(),$=t(),V=l("div"),A&&A.c(),k=t(),H&&H.c(),this.h()},l(s){e=n(s,"DIV",{class:!0});var l=c(e);a=n(l,"DIV",{class:!0});var t=c(a);d=n(t,"DIV",{class:!0});var r=c(d);p=n(r,"H1",{class:!0});var h=c(p);u=i(h,"FFA"),h.forEach(f),v=o(r),x=n(r,"P",{class:!0});var g=c(x);C.l(g),g.forEach(f),r.forEach(f),y=o(t),I=n(t,"DIV",{class:!0});var m=c(I);B(D.$$.fragment,m),b=o(m),F&&F.l(m),m.forEach(f),t.forEach(f),$=o(l),V=n(l,"DIV",{class:!0});var E=c(V);A&&A.l(E),k=o(E),H&&H.l(E),E.forEach(f),l.forEach(f),this.h()},h(){h(p,"class","text-6xl leading-none"),h(x,"class","timer text-primary ml-5 text-3xl leading-none svelte-agtwr1"),h(d,"class","mode-timer flex justify-center lg:justify-start\r\n                        items-end w-60 "),h(I,"class","lg:mr-7 mt-4 lg:mt-0 flex flex-col lg:flex-row\r\n                        items-center"),h(a,"class","flex flex-col justify-center lg:flex-row\r\n                    lg:justify-between items-center lg:mt-12 mt-7"),h(V,"class","flex items-center flex-col lg:flex-row lg:items-start\r\n                    h-full"),h(e,"class","h-full flex items-center flex-col lg:block lg:ml-24")},m(s,l){g(s,e,l),m(e,a),m(a,d),m(d,p),m(p,u),m(d,v),m(d,x),C.m(x,null),m(a,y),m(a,I),T(D,I,null),m(I,b),F&&F.m(I,null),m(e,$),m(e,V),A&&A.m(V,null),m(V,k),H&&H.m(V,null),P=!0},p(s,e){L===(L=R(s))&&C?C.p(s,e):(C.d(1),C=L(s),C&&(C.c(),C.m(x,null)));const a={};64&e&&(a.isRefreshing=s[6]),D.$set(a),0==s[3].gamesPlayed?F?F.p(s,e):(F=rs(s),F.c(),F.m(I,null)):F&&(F.d(1),F=null),s[3]?A?A.p(s,e):(A=ns(s),A.c(),A.m(V,k)):A&&(A.d(1),A=null),s[4]?H?H.p(s,e):(H=cs(s),H.c(),H.m(V,null)):H&&(H.d(1),H=null)},i(s){P||(w(D.$$.fragment,s),P=!0)},o(s){E(D.$$.fragment,s),P=!1},d(s){s&&f(e),C.d(),M(D),F&&F.d(),A&&A.d(),H&&H.d()}}}function as(s){let e,a;return e=new K({props:{players:s[0].players,winners:s[0].winners}}),{c(){G(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,l){T(e,s,l),a=!0},p(s,a){const l={};1&a&&(l.players=s[0].players),1&a&&(l.winners=s[0].winners),e.$set(l)},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){E(e.$$.fragment,s),a=!1},d(s){M(e,s)}}}function ls(s){let e;return{c(){e=r("Loading...")},l(s){e=i(s,"Loading...")},m(s,a){g(s,e,a)},p:p,d(s){s&&f(e)}}}function ts(s){let e;return{c(){e=r(s[2])},l(a){e=i(a,s[2])},m(s,a){g(s,e,a)},p(s,a){4&a&&P(e,s[2])},d(s){s&&f(e)}}}function rs(s){let e,a,t,o;return{c(){e=l("button"),a=r("Quit lobby"),this.h()},l(s){e=n(s,"BUTTON",{class:!0});var l=c(e);a=i(l,"Quit lobby"),l.forEach(f),this.h()},h(){h(e,"class","button button-brand quit lg:ml-4 mt-2\r\n                                lg:mt-0 svelte-agtwr1")},m(l,r){g(l,e,r),m(e,a),t||(o=R(e,"click",s[11]),t=!0)},p:p,d(s){s&&f(e),t=!1,o()}}}function ns(s){let e,a,d,p,u,v,x,E,y,w,I,D,b,$,V,k,G,B,T,M,R=s[3].username+"",j=s[3].gamesPlayed+"",L=s[3].wins+"";return{c(){e=l("div"),a=l("img"),u=t(),v=l("p"),x=r(R),E=t(),y=l("div"),w=l("p"),I=r("Games played:\r\n                                        "),D=l("b"),b=r(j),$=r("\r\n                                        /8"),V=t(),k=l("p"),G=r("Games won:\r\n                                        "),B=l("b"),T=r(L),M=r("\r\n                                        /8"),this.h()},l(s){e=n(s,"DIV",{class:!0});var l=c(e);a=n(l,"IMG",{src:!0,alt:!0,class:!0}),u=o(l),v=n(l,"P",{class:!0});var t=c(v);x=i(t,R),t.forEach(f),E=o(l),y=n(l,"DIV",{class:!0});var r=c(y);w=n(r,"P",{});var h=c(w);I=i(h,"Games played:\r\n                                        "),D=n(h,"B",{class:!0});var d=c(D);b=i(d,j),d.forEach(f),$=i(h,"\r\n                                        /8"),h.forEach(f),V=o(r),k=n(r,"P",{});var g=c(k);G=i(g,"Games won:\r\n                                        "),B=n(g,"B",{class:!0});var m=c(B);T=i(m,L),m.forEach(f),M=i(g,"\r\n                                        /8"),g.forEach(f),r.forEach(f),l.forEach(f),this.h()},h(){a.src!==(d="/assets/CharactersBanners/"+s[3].legends+".png")&&h(a,"src",d),h(a,"alt",p=s[3].legends),h(a,"class","block"),h(v,"class","player-name text-4xl svelte-agtwr1"),h(D,"class","svelte-agtwr1"),h(B,"class","svelte-agtwr1"),h(y,"class","stats text-2xl bottom-5 text-ultra-light svelte-agtwr1"),h(e,"class","mt-8 lg:mt-25 ffa-player card user svelte-agtwr1")},m(s,l){g(s,e,l),m(e,a),m(e,u),m(e,v),m(v,x),m(e,E),m(e,y),m(y,w),m(w,I),m(w,D),m(D,b),m(w,$),m(y,V),m(y,k),m(k,G),m(k,B),m(B,T),m(k,M)},p(s,e){8&e&&a.src!==(d="/assets/CharactersBanners/"+s[3].legends+".png")&&h(a,"src",d),8&e&&p!==(p=s[3].legends)&&h(a,"alt",p),8&e&&R!==(R=s[3].username+"")&&P(x,R),8&e&&j!==(j=s[3].gamesPlayed+"")&&P(b,j),8&e&&L!==(L=s[3].wins+"")&&P(T,L)},d(s){s&&f(e)}}}function cs(s){let e,a=s[4],t=[];for(let e=0;e<a.length;e+=1)t[e]=os(S(s,a,e));return{c(){e=l("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=n(s,"DIV",{class:!0});var a=c(e);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(f),this.h()},h(){h(e,"class","flex flex-col justify-center lg:justify-start\r\n                            lg:flex-row lg:flex-wrap lg:ml-33 mt-14 lg:mt-0")},m(s,a){g(s,e,a);for(let s=0;s<t.length;s+=1)t[s].m(e,null)},p(s,l){if(16&l){let r;for(a=s[4],r=0;r<a.length;r+=1){const n=S(s,a,r);t[r]?t[r].p(n,l):(t[r]=os(n),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=a.length}},d(s){s&&f(e),v(t,s)}}}function os(s){let e,a,d,p,u,v,x,E,y,w,I,D,b,$,V,k=s[15].username+"",G=s[15].gamesPlayed+"";return{c(){e=l("div"),a=l("img"),u=t(),v=l("p"),x=r(k),E=t(),y=l("div"),w=l("p"),I=r("Games played:\r\n                                                "),D=l("b"),b=r(G),$=r("\r\n                                                /8"),V=t(),this.h()},l(s){e=n(s,"DIV",{class:!0});var l=c(e);a=n(l,"IMG",{src:!0,alt:!0,class:!0}),u=o(l),v=n(l,"P",{class:!0});var t=c(v);x=i(t,k),t.forEach(f),E=o(l),y=n(l,"DIV",{class:!0});var r=c(y);w=n(r,"P",{});var h=c(w);I=i(h,"Games played:\r\n                                                "),D=n(h,"B",{class:!0});var d=c(D);b=i(d,G),d.forEach(f),$=i(h,"\r\n                                                /8"),h.forEach(f),r.forEach(f),V=o(l),l.forEach(f),this.h()},h(){a.src!==(d="/assets/CharactersBanners/"+s[15].legends+".png")&&h(a,"src",d),h(a,"alt",p=s[15].legends),h(a,"class","block"),h(v,"class","player-name text-3xl svelte-agtwr1"),h(D,"class","svelte-agtwr1"),h(y,"class","stats text-xl bottom-5\r\n                                        text-ultra-light svelte-agtwr1"),h(e,"class","ffa-player card lg:mr-12 mb-8 svelte-agtwr1")},m(s,l){g(s,e,l),m(e,a),m(e,u),m(e,v),m(v,x),m(e,E),m(e,y),m(y,w),m(w,I),m(w,D),m(D,b),m(w,$),m(e,V)},p(s,e){16&e&&a.src!==(d="/assets/CharactersBanners/"+s[15].legends+".png")&&h(a,"src",d),16&e&&p!==(p=s[15].legends)&&h(a,"alt",p),16&e&&k!==(k=s[15].username+"")&&P(x,k),16&e&&G!==(G=s[15].gamesPlayed+"")&&P(b,G)},d(s){s&&f(e)}}}function is(s){let e,a,l,r,n;const c=[Z,X],i=[];function h(s,e){return s[5]?0:1}return a=h(s),l=i[a]=c[a](s),{c(){e=t(),l.c(),r=u(),this.h()},l(s){x('[data-svelte="svelte-y6pzc3"]',document.head).forEach(f),e=o(s),l.l(s),r=u(),this.h()},h(){document.title="Winhalla | FFA match"},m(s,l){g(s,e,l),i[a].m(s,l),g(s,r,l),n=!0},p(s,[e]){let t=a;a=h(s),a===t?i[a].p(s,e):(D(),E(i[t],1,1,(()=>{i[t]=null})),y(),l=i[a],l?l.p(s,e):(l=i[a]=c[a](s),l.c()),w(l,1),l.m(r.parentNode,r))},i(s){n||(w(l),n=!0)},o(s){E(l),n=!1},d(s){s&&f(e),i[a].d(s),s&&f(r)}}}async function fs({params:s}){return{id:s.id}}function hs(s,e,a){let l,t,r,n,c,o,i,{id:f}=e;I((async()=>{b.subscribe((s=>{l=s.content}))();try{l=await l,l=l.steam,a(0,t=await $("get",`/getMatch/${f}`)),a(1,r=t.finished),h(!1);const s=new Date(c.joinDate);!function(s){let e,l,t,r=s;setInterval((function(){t=Math.floor(r%60),l=Math.floor(r/60%60),e=Math.floor(r/3600),l=l<10?"0"+l:l,t=t<10?"0"+t:t,a(2,n=e+":"+l+":"+t),--r<0&&(r=s)}),1e3)}(-((new Date).getTime()-new Date(s.setHours(s.getHours()+3)).getTime())/1e3),b.set({refresh:!0});let e=C.io(V);e.on("connection",(s=>{console.log(s),e.emit("match connection","FFA"+f)})),e.on("join match",(s=>{console.log(s)})),e.on("lobbyUpdate",(s=>{a(0,t=s),h(!0)}))}catch(s){s.response&&(400===s.response.status&&s.response.data.includes("Play at least one ranked")?a(5,i="You have to play a ranked game before using the site (1v1 or 2v2 doesn't matter)"):400===s.response.status&&s.response.data.includes("Play at least one")&&a(5,i="You have to download brawlhalla and play at least a game (or you are logged in with the wrong account)"))}}));const h=s=>{if(!1===s)a(3,c=t.players.find((s=>s.steamId===parseInt(l.id))));else{let s=t.players.findIndex((s=>s.steamId===parseInt(l.id)));a(0,t.players[s].wins=c.wins,t),a(3,c=t.players[s])}a(4,o=[...t.players]),o.splice(t.players.findIndex((s=>s.steamId===parseInt(l.id))),1)};let d=!1;const g=async()=>{a(6,d=!0);let s=c.gamesPlayed;a(0,t=await $("get",`/getMatch/${f}`)),h(!1),c.gamesPlayed!==s?b.set({refresh:!0}):t.finished&&!1===r&&(a(1,r=!0),b.set({refresh:!0})),a(6,d=!1)},m=async()=>{console.log("quit"),await $("post","/exitMatch"),k("/play")};return s.$$set=s=>{"id"in s&&a(9,f=s.id)},[t,r,n,c,o,i,d,g,m,f,()=>g(),()=>m()]}export default class extends s{constructor(s){super(),e(this,s,hs,is,a,{id:9})}}export{fs as preload};
